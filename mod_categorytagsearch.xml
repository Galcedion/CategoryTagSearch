<?xml version="1.0" encoding="utf-8"?>
<extension type="module" version="3.1" client="site" method="upgrade">
	<name>CategoryTagSearch</name>
	<author>Galcedion</author>
	<creationDate>2025</creationDate>
	<version>1.0.0</version>
	<license>GPL-3.0</license>
	<description>Client-side module which creates a list of articles with respective tags. Allows frontend-users to click tags and filter the list to those selected. (Search with logic AND, meaning all selected tags need to apply)
	The list is single paged and search is done with JavaScript, making it dynamic withoud needing to reload the page.
	The base list are all articles of a certain category with tags.</description>
	<files>
        <filename module="mod_categorytagsearch">mod_categorytagsearch.php</filename>
        <filename>helper.php</filename>
        <folder>tmpl</folder>
    </files>
	<config>
		<fields name="params">
			<fieldset name="basic">
				<field
					name="g_class"
					type="text"
					label="MOD_CTS_G_CLASS_LABEL"
					default="g-mod-cts"
					required="1"
					description="MOD_CTS_G_CLASS_DESC"/>
				<field
					name="s_main_search"
					type="spacer"
					label=""
					hr="true"/>
				<field
					name="s_main_search_text"
					type="spacer"
					class="fw-bold"
					label="Search settings"/>
				<field
					name="category"
					type="sql"
					label="Select Category for Articles"
					query="SELECT id, title FROM #__categories WHERE level > 0"
					key_field="id"
					value_field="title"
					required="True"
					description="Which category of content is used for tags and displaying articles."/>
				<field
					name="striptag"
					type="text"
					label="Stip Tag text"
					description="Text to remove from displayed tags. The language Setting of the current language (i.e. '-en-GB') is automatically removed."/>
				<field
					name="search_mode"
					type="radio"
					default="0"
					label="Search mode"
					description="How the search should be displayed: dynamic or static dynamic - all possible results will be loaded and any search refinement will be done with JavaScript without reloading the page static - only a part of the results will be loaded each time, any changes will result in a page reload (suggested if users want to share the search)"
					layout="joomla.form.field.radio.switcher">
					<option value="0">dynamic</option>
					<option value="1">static</option>
				</field>
				<field
					name="show_columns"
					type="number"
					default="4"
					label="Number of columns for results"
					description=""
					min="1"
					max="12"
					step="1"/>
				<field
					name="show_rows"
					type="number"
					default="10"
					label="Number of rows for results"
					description=""
					min="5"
					max="50"
					step="5"/>
				<field
					name="paging"
					type="list"
					default="0"
					label="Results per page"
					description="Sets the number of maximum results per page.">
					<option value="0">0 - all results</option>
					<option value="10">10</option>
					<option value="20">20</option>
					<option value="50">50</option>
					<option value="100">100</option>
				</field>
				<field
					name="use_article_lang"
					type="radio"
					default="0"
					label="Limit articles to current language?"
					description="If selected, only articles matching the user's language will be displayed."
					layout="joomla.form.field.radio.switcher">
					<option value="0">JNo</option>
					<option value="1">JYes</option>
				</field>
				<field
					name="use_tag_lang"
					type="radio"
					default="0"
					label="Limit tags to current language?"
					description="If selected, only tags matching the user's language will be available."
					layout="joomla.form.field.radio.switcher">
					<option value="0">JNo</option>
					<option value="1">JYes</option>
				</field>
				<field
					name="s_search_style"
					type="spacer"
					label=""
					hr="true"/>
				<field
					name="s_search_style_text"
					type="spacer"
					class="fw-bold"
					label="Display and Style settings"/>
				<field
					name="module_head"
					type="radio"
					default="0"
					label="Use module header and description?"
					description="If checked, the header and description set below are used."
					layout="joomla.form.field.radio.switcher">
					<option value="0">JNo</option>
					<option value="1">JYes</option>
				</field>
				<field
					name="pageheader"
					type="text"
					label="Header"
					default="Search by Tag"
					required="True"
					description="Headline to be displayed in the frontend."/>
				<field
					name="pageinfo"
					type="text"
					label="Enter your description here."
					description="Description displayed in the frontend. Does not appear if left empty."/>
				<field
					name="result_icon"
					type="radio"
					default="0"
					label="Show the article icon?"
					description="If available, the Into Image of each article will be used."
					layout="joomla.form.field.radio.switcher">
					<option value="0">JNo</option>
					<option value="1">JYes</option>
				</field>
				<field
					name="result_title"
					type="radio"
					default="1"
					label="Show the article title?"
					description="Select whether the article title (or menu title, if available) will be displayed."
					layout="joomla.form.field.radio.switcher">
					<option value="0">JNo</option>
					<option value="1">JYes</option>
				</field>
				<field
					name="result_direction"
					type="list"
					default="0"
					label="Article overview display"
					description="Sets how the information of each article will be displayed.">
					<option value="0">Below each other</option>
					<option value="1">Next to each other</option>
				</field>
				<field
					name="custom_css"
					type="textarea"
					label="MOD_CTS_CUSTOM_CSS_LABEL"
					rows="10"
					description="MOD_CTS_CUSTOM_CSS_DESC"/>
			</fieldset>
		</fields>
	</config>
</extension>
